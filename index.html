<!DOCTYPE html>
<html>
  <head>
    <title>Jety Farm Flyer</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="modal.css">
    <link rel="stylesheet" href="toggleButton.css">
    
    <style>
      @font-face { font-family: Architects; src: url('ArchitectsDaughter-Regular.ttf'); }
      @font-face { font-family: Raleway; src: url('Raleway-VariableFont_wght.ttf'); }
      @font-face { font-family: Caveat; src: url('Caveat-Medium.ttf'); }
      @font-face { font-family: Pacifico; src: url('Pacifico-Regular.ttf'); }

      * {
        box-sizing: border-box
      }
      /* ======================================= */
      /* Style: Layout */
      /* ======================================= */
      html {
        width:  100%;
        height: 100vh;
        font-family: Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background-color: rgba(110, 148, 106, 0.8);
      }
      /* Style the header */
      header {
        background-color: #274e13ff;
        text-align: center;
        color: white;
        height: 16vh;
        padding: 0;
        margin: 0;
      }
      body {
        width:  100%;
        height: 100vh;
        font-family: Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background-color: white;
      }
      bottom {
        background-color: #274e13ff;
        text-align: center;
        color: rgb(223, 223, 223);
        width: 100%;
        height: 8vh;
        padding: 0;
        margin: 0;
      }
      img {
        padding: 0;
        display: block;
        margin: 0 auto;
        max-height: auto;
        max-width: 80vw;
        -webkit-user-drag: none;
        -khtml-user-drag: none;
        -moz-user-drag: none;
        -o-user-drag: none;
        user-drag: none;
        pointer-events: none;
      } 
      /* On smaller screens, decrease text size */
      @media only screen and (max-width: 300px) {
        .prev,
        .next,
        .text {
          font-size: 8px
        }
      }
      @media screen and (min-width: 601px) {
        p.footnotetext {
          font-size: 1vh;
        }
      }

      @media screen and (max-width: 600px) {
        p.footnotetext {
          font-size: 1.2vh;
        }
      }

      .center {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 50%;
      }

      .main div {
        float: left;
        clear: none;
      }

      @keyframes hideMe{
        0%{
            opacity: 1;
        }
        90%{
            opacity: 1;
        }
        100%{
            opacity: 0;
        }
      }
    </style>
    <script>
      function setCookie(cname,cvalue,exdays) {
        const d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        let expires = "expires=" + d.toUTCString();
        let s = cname + "=" + cvalue + ";" + expires + ";path=/";
        document.cookie = s;
      }

      function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for(let i = 0; i < ca.length; i++) {
          let c = ca[i];
          while (c.charAt(0) == ' ') {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
      }

      function onBodyLoad() {
        checkReminder();
        checkTutorial();
        loadFlyerText();
        loadProduces();
      }

      function checkTutorial() {
        let dontshow = getCookie("dontShowTutorial20220729");
        if (dontshow == "" || dontshow == "false") {
          setCookie( "dontShowTutorial20220729", false, 30 );
          var t = document.getElementById("tutorial")
          t.style.display="block";
        }
      }

      function checkReminder() {
        let dontshow = getCookie("dontShowReminder20221103");
//        let dontshow = "true";
        if (dontshow == "" || dontshow == "false") {
          setCookie( "dontShowReminder20221103", false, 30 );
          var t = document.getElementById("reminder")
          t.style.display="block";
        }
      }

    </script>

    <script type="text/javascript" src="produceData20220540.json"></script>
    <script type="text/javascript" src="flyerData2022133.json"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  </head>

  <!--  ============================================  -->
  <!--                      BODY                      -->
  <!--  ============================================  -->
  <body onload="onBodyLoad()">

    <header>
      <div style="height: 8vh; padding: 0.5vh;">
        <img src="images/JetyLogo.png" class="center" style="width: auto; height: 8vh;">
      </div>
      <div style="background-color: #0c343dff; height: 8vh; padding: 1.4vh;">
        <p id="flyerBanner1Txt" style="margin: auto; margin-bottom: 0.2vh; text-align:center; font-family: Raleway; font-size: 2vh; color: rgb(223, 223, 223);"></p>
        <p id="flyerBanner2Txt" style="margin: auto; margin-left: 4vw; margin-right: 4vw; text-align:center; font-family: Raleway; font-size: 1.4vh; color: rgb(223, 223, 223);"></p>
        <div>
          <img src="images/discount_xmas.png" class="center" style="position:absolute; top:12%; left:68%; transform: translate(-4%,-65%); margin:auto; height:30vw; width:30vw;">
        </div>
      </div>
    </header>

    <!-- <div style="background-color: rgb(74, 109, 58); height: 72vh;"> -->
    <div style="background-color: rgb(74, 109, 58); text-align: center; height: 71vh; overflow-y: scroll;">

      <!-- Reminder -->
      <div id="reminder" class="modal" style="padding-top: 30vh;">
        <div class="modal-content" style="text-align: center; background-color: rgb(63, 63, 63); width: 75vw; height:auto;">

          <span id="reminderClose" class="close">&times;</span>
          <div style="height: 3.5vh;"> </div>
          <p id="reminderTxt" style="margin: auto; margin-left: 4vw; margin-right: 4vw; text-align:justify; font-family: Raleway; font-size: 1.45vh; color: rgb(223, 223, 223);"></p>
          <div style="height: 2.5vh;"> </div>

          <!-- Don't show again -->
          <div style="width:30vw; height: 5vw; text-align: right; margin-left: 35vw;">
            <label class="switch" style="vertical-align: middle;">
              <input id="dontshow" type="checkbox" style="vertical-align: middle;" onclick="handleClickDontShow(this);">
              <span class="slider round" style="vertical-align: middle;"></span>
            </label>
            <label for="dontshow" style="margin-left: 0.5vw; text-align: right; vertical-align: middle; font-family: Raleway; color: #a5a5a5; font-size: 2vw;">
              Don't show again
            </label>
          </div>
          <div style="height: 1vh;"> </div>
        </div> 
      </div>

      <!-- Tutorial -->
      <div id="tutorial" class="modal" style="padding-top: 10vh; animation: hideMe 60s forwards;">
        <script>
          // Set the date we're counting down to
          var countDownDate = new Date().getTime()+52000;

          // Update the count down every 1 second
          var x = setInterval(function() {

            // Get today's date and time
            var now = new Date().getTime();

            // Find the distance between now and the count down date
            var distance = countDownDate - now;

            // Time calculations for days, hours, minutes and seconds
            //var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            //var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            //var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);

            // Display the result in the element with id="demo"
            document.getElementById("demo").innerHTML = "This tutorial will be closed in " + seconds + " sec";

            // If the count down is finished, write some text
            if (distance < 0) {
              clearInterval(x);
              document.getElementById("demo").innerHTML = "CLOSING...";
            }
          }, 1000);
        </script>

        <div class="modal-content" style="text-align: center; background-color: #fefefe; width: 88vw; height:auto;">

          <span id="tutorialClose" class="close">&times;</span>
          <p style="text-align: center; vertical-align: middle; font-family: Raleway; color: #707070; font-size: 4.5vw;">How to navigate Jety Farm flyer...</p>
          <img src="images/jetyTutorial.png" class="center" style="width: auto; height: 60vh; object-fit: contain;">
         
          <!-- Don't show again -->
          <div style="width:30vw; height: 5vw; text-align: right; margin-left: 45vw;">
            <label class="switch" style="vertical-align: middle;">
              <input id="dontshow" type="checkbox" style="vertical-align: middle;" onclick="handleClickDontShow(this);">
              <span class="slider round" style="vertical-align: middle;"></span>
            </label>
            <label for="dontshow" style="margin-left: 0.5vw; text-align: right; vertical-align: middle; font-family: Raleway; color: #707070; font-size: 2vw;">
              Don't show again
            </label>
          </div>
          <div style="width:40vw; height: 5vw; text-align: right; margin-left: 35vw;">
            <p id="demo" style="margin-left: 0.5vw; text-align: right; vertical-align: middle; font-family: Raleway; color: #707070; font-size: 2vw;">
            </p>
          </div>
          <div style="height: 2vh;"> </div>
        </div> 
      </div>


      <!-- Produce item Modal box -->
      <div id="produceModal" class="modal">
        <div class="modal-content-roundcorner">
          <span id="modalClose" class="close">&times;</span>
          <div style="margin-top: 3vh; margin-left: 2vw; margin-right: 2vw;">
            <div style="margin-right: 2vw; width: 8vh;">
                <img id="modalImage" style="width: auto; height: 28vw;">
            </div>
            <div style="text-align: left; padding-bottom: 1vh;">
              <p style="text-align:left; color: rgb(44, 44, 44); font-size: 5vw; font-family: Raleway; line-height: 100%;" id="modalTitle"></p> </p>
              <p style="text-align:justify; color: rgb(44, 44, 44); font-size: 3vw; font-family: Raleway;" id="modalText"></p> </p>
            </div>
          </div>
        </div>
      </div>

      <!-- List of produces -->
      <div id="produceList" onload="loadProduces()" class="portrait">
        <script>
          var pl = document.getElementById("produceList");

          // eggs
          function createProduceStatic(_id,_soldout,_soldoutText) {
            var d = document.createElement('div');
            d.setAttribute("style","text-align:center; position:relative; margin:auto; height:auto; width:80vw;" );
            d.id = _id;
            d.addEventListener( "click", function(){ showModal(this.id)} );

            var produce_index=0;
            $.each(myProducesData, function(i, item) {
              if( myProducesData[i].id == _id ) {
                produce_index = i;
              }
            });

            // create image
            var p = document.createElement('img');
            var imgPath = "images/produces/"+myProducesData[produce_index].produce_image;
            p.src = imgPath;
            d.appendChild(p);   

            if(_soldout=="true") {
              var sd = document.createElement('div');
              sd.setAttribute("style","position:absolute; top:20%; left:-5%; transform: translate(-4%,-50%); margin:auto; height:30vw; width:30vw;" );

              var s = document.createElement('img');
              s.setAttribute("style","height:100%; width:100%;" );
              var soldoutImgPath = "images/soldoutStatic.png";
              s.src = soldoutImgPath;
              sd.appendChild(s);   

              var st = document.createElement('div');
              st.setAttribute("style","position:absolute; top:20%; left:20%; text-align:center; height:65%; width:65%;" );

              var t = document.createElement("P");                 // Create a <p> element
//              t.setAttribute("style","position:absolute; top:10%; left:0%;  margin: auto; text-align:center; color: white; font-size: 3vw; font-family: Architects; margin:auto; height: auto; line-height: 1.0;" );
              t.setAttribute("style","position:absolute; top:10%; left:0%;  margin: auto; text-align:center; color: white; font-size: 3.5vw; font-family: Architects; margin:auto; height: auto; line-height: 1.0;" );
              t.innerHTML = _soldoutText; 
              st.appendChild(t);   
              sd.appendChild(st);   
              d.appendChild(sd);   
            }
            pl.appendChild(d);   

            // create a line
            var l = document.createElement('div');
            l.setAttribute("style","text-align:center; margin:auto; height:0.3vh; width:80vw; background-color:#0c343d;" );
            pl.appendChild(l);  
          }

          // Create produce item
          function createProduce(_id,_soldout,_soldoutText) {
            var d = document.createElement('div');
            d.setAttribute("style","text-align:center; position:relative; margin:auto; height:auto; width:80vw;" );
            d.id = _id;
            d.addEventListener( "click", function(){ showModal(this.id)} );

            var produce_index=0;
            $.each(myProducesData, function(i, item) {
              if( myProducesData[i].id == _id ) {
                produce_index = i;
              }
            });

            // create image
            var p = document.createElement('img');
            var imgPath = "images/produces/"+myProducesData[produce_index].produce_image;
            p.src = imgPath;
            d.appendChild(p);   

            {
              // create div for text
              var dt = document.createElement('div');
              dt.setAttribute("style","position:absolute; vertical-align:middle; top:50%; left:47%; transform: translate(-4%,-50%); margin:auto; width:45vw;" );

              var t1 = document.createElement("P");                 // Create a <p> element
              t1.setAttribute("style","text-align:left; color: white; font-size: 4vw; font-family: Pacifico; margin:auto; height:auto; line-height: 1.5;" );
              t1.innerHTML = myProducesData[produce_index].title;   
              dt.appendChild(t1);

              var t2 = document.createElement("P");                 // Create a <p> element
              t2.setAttribute("style","margin: auto; text-align:left; color: white; font-size: 3.2vw; font-family: Caveat; margin:auto; height: auto; line-height: 1.0;" );
              t2.innerHTML = myProducesData[produce_index].pricing; 
              dt.appendChild(t2);
            }
            d.appendChild(dt);

            if(_soldout=="true") {
              if(_soldoutText=="")
              {
                var s = document.createElement('img');
                s.setAttribute("style","position:absolute; top:22%; left:75%; transform: translate(-4%,-60%); margin:auto; height:20vw; width:20vw;" );

                var soldoutImgPath = "images/soldout5.png";
                s.src = soldoutImgPath;
                d.appendChild(s);   
              }
              else
              {
                var sd = document.createElement('div');
                sd.setAttribute("style","position:absolute; vertical-align:middle; top:20%; left:70%; transform: translate(-4%,-65%); margin:auto; width:30vw;" );

                var s = document.createElement('img');
                s.setAttribute("style","height:100%; width:100%;" );
                var soldoutImgPath = "images/soldout3.png";
                s.src = soldoutImgPath;
                sd.appendChild(s);   

                var st = document.createElement('div');
                st.setAttribute("style","position:absolute; top:8%; left:15%; text-align:center; height:65%; width:65%;" );

                var t = document.createElement("P");                 // Create a <p> element
  //              t.setAttribute("style","position:absolute; top:10%; left:0%;  margin: auto; text-align:center; color: white; font-size: 3vw; font-family: Architects; margin:auto; height: auto; line-height: 1.0;" );
                t.setAttribute("style","position:absolute; top:30%; left:0%;  margin: auto; text-align:center; color: white; font-size: 3.8vw; font-family: Architects; margin:auto; height: auto; line-height: 1.0;" );
                t.innerHTML = _soldoutText; 
                st.appendChild(t);   
                sd.appendChild(st);   
                d.appendChild(sd);  
              }
            }

            pl.appendChild(d);   

            // create a line
            var l = document.createElement('div');
            l.setAttribute("style","text-align:center; margin:auto; height:0.3vh; width:80vw; background-color:#0c343d;" );
            pl.appendChild(l);   
          }

          function createDivider(dividerTitle,_soldout,_soldoutText) {
            var p = document.createElement('div');
            p.setAttribute("style","text-align:center;  position:relative; margin:auto; height: auto; width:80vw; background-color:#274e13; padding-top:1.2vh; padding-bottom:1.2vh;" );
            var t = document.createElement("P");                 // Create a <p> element
            t.setAttribute("style","text-align:center; color: rgb(223, 223, 223); font-size: 5.1vw; font-family: Pacifico; margin:auto;" );
            t.innerHTML = dividerTitle;                // Insert text
            p.appendChild(t); 
            // {
            //     var s = document.createElement('img');
            //     s.setAttribute("style","position:absolute; top:30%; left:70%; transform: translate(-4%,-65%); margin:auto; height:30vw; width:30vw;" );

            //     var soldoutImgPath = "images/soldout.png";
            //     s.src = soldoutImgPath;
            //     p.appendChild(s);   
            // }
            pl.appendChild(p);   

            // create a line
            var d = document.createElement('div');
            d.setAttribute("style","text-align:center; margin:auto; height:0.3vh; width:80vw; background-color:#0c343d;" );
            pl.appendChild(d);   
          }

          function createNote(noteContent) {
            var p = document.createElement('div');
            p.setAttribute("style","text-align:center; margin:auto; height: auto; width:80vw; background-color: rgb(54, 54, 54); padding-top:1.2vh; padding-bottom:1.2vh;" );
            var t = document.createElement("P");                 // Create a <p> element
            t.setAttribute("style","margin: auto; margin-left: 4vw; margin-right: 4vw; text-align:justify; font-family: Raleway; font-size: 1.3vh; color: rgb(223, 223, 223);" );
 

            t.innerHTML = noteContent;                // Insert text
            p.appendChild(t); 
            pl.appendChild(p);   

            // create a line
            var d = document.createElement('div');
            d.setAttribute("style","text-align:center; margin:auto; height:0.3vh; width:80vw; background-color:#0c343d;" );
            pl.appendChild(d);   
          }

          function loadProduces() {
            for( let i = 0; i < myFlyerProduceList.length; i++) {
              if( myFlyerProduceList[i].type == "note" ) {
                createNote( myFlyerProduceList[i].note);
              } else if( myFlyerProduceList[i].type == "divider" ) {
                createDivider( myFlyerProduceList[i].id, myFlyerProduceList[i].soldout, myFlyerProduceList[i].soldoutText);
              } else {
                $.each(myProducesData, function(j, item) {
                  if( myProducesData[j].id == myFlyerProduceList[i].id ) {
                    if( myProducesData[j].produce_div == "static") {
                      createProduceStatic( myProducesData[j].id, myFlyerProduceList[i].soldout, myFlyerProduceList[i].soldoutText );
                    } else {
                      createProduce( myProducesData[j].id, myFlyerProduceList[i].soldout, myFlyerProduceList[i].soldoutText );
                    }
                  }
                });
              }
            }
          }

        </script>
      </div>

      <script>
        // Get the modal
        var tutorial = document.getElementById("tutorial");
        var reminder = document.getElementById("reminder");
        var modal = document.getElementById("produceModal");
        // Get the <span> element that closes the modal
        var tutorialClose = document.getElementById("tutorialClose");
        var reminderClose = document.getElementById("reminderClose");
        var modalClose = document.getElementById("modalClose");

        // When the user clicks on <span> (x), close the modal
        tutorialClose.onclick = function(event) {
          tutorial.style.display = "none";
        }
        reminderClose.onclick = function(event) {
          reminder.style.display = "none";
        }
        modalClose.onclick = function(event) {
          modal.style.display = "none";
        }
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {          
          if (event.target == modal) {
            modal.style.display = "none";
          }
          if (event.target == tutorial) {
            tutorial.style.display = "none";
          }
          if (event.target == reminder) {
            reminder.style.display = "none";
          }
        }

        function showModal(produceId) {
          $.each(myProducesData, function(i, item) {
            if( myProducesData[i].id == produceId ) {
              var imgPath = "images/produces/"+myProducesData[i].image;
              document.getElementById("modalImage").src = imgPath;
              document.getElementById("modalTitle").innerHTML = myProducesData[i].description_title;
              document.getElementById("modalText").innerHTML = myProducesData[i].description;
            }
          });
          modal.style.display = "block";
        }

        function handleClickDontShow(cb) {
          setCookie( "dontShowTutorial20220729", cb.checked, 30 );
          let dontshow = getCookie("dontShowTutorial20220729");
        }

        function handlerReminderDontShow(cb) {
          setCookie( "dontShowReminder20221103", cb.checked, 30 );
          let dontshow = getCookie("dontShowReminder20221103");
        }
      </script>        
    </div>
   
    <div style="background-color: #274e13ff; height: auto; max-height: 12vh; padding: 0.1vh; margin: 0;">
      <div style="margin: auto; text-align: center; width: 90vw; ">
        <p class="footnotetext" id="flyerFootnoteTxt" style="text-align:center; color: rgb(223, 223, 223);"></p>
      </div>

      <!-- hitwebcounter Code START -->
      <a href="https://www.hitwebcounter.com" target="_blank">
        <img src="https://hitwebcounter.com/counter/counter.php?page=7998309&style=0007&nbdigits=5&type=page&initCount=1315" title="Free Counter" Alt="web counter"   border="0" /></a>   
    </div>

    <script>
        function loadFlyerText() {
          var t1 = document.getElementById("flyerBanner1Txt");
          t1.innerHTML = myFlyerData[0].banner1Txt; 
          var t2 = document.getElementById("flyerBanner2Txt");
          t2.innerHTML = myFlyerData[0].banner2Txt;
          var t3 = document.getElementById("flyerFootnoteTxt");
          t3.innerHTML = myFlyerData[0].footnoteTxt;
          var r1 = document.getElementById("reminderTxt");
          r1.innerHTML = myFlyerData[0].reminderTxt;
        }
    </script>
  </body>
</html>